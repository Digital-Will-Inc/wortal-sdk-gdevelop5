{
  "author": "",
  "category": "Third-party",
  "extensionNamespace": "",
  "fullName": "Wortal SDK",
  "helpPath": "https://docs.games-api.ai",
  "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPHBvbHlnb24gY2xhc3M9InN0MCIgcG9pbnRzPSIxNywzIDgsMyA0LDEzIDgsMjkgMTcsMjkgMjEsMTMgIi8+DQo8cG9seWxpbmUgY2xhc3M9InN0MCIgcG9pbnRzPSIxNywyOSAyNCwyOSAyOCwxMyAyNCwzIDE3LDMgIi8+DQo8bGluZSBjbGFzcz0ic3QwIiB4MT0iMTIiIHkxPSI3IiB4Mj0iMTIiIHkyPSIyNSIvPg0KPGxpbmUgY2xhc3M9InN0MCIgeDE9IjgiIHkxPSIxMyIgeDI9IjE2IiB5Mj0iMTMiLz4NCjwvc3ZnPg0K",
  "name": "WortalSDK",
  "previewIconUrl": "https://asset-resources.gdevelop.io/public-resources/Icons/Line Hero Pack/Master/SVG/Halloween/9f012bdef8ff0dc1d0748bf7f99b795e62e4408a900d7df4ad643ed0b889c01f_Halloween_coffin.svg",
  "shortDescription": "Wortal SDK for GDevelop5",
  "version": "1.0.0",
  "description": "",
  "tags": [],
  "authorIds": [
    "jSwIVHwOdwWxF9zEtBm3knk782G2"
  ],
  "dependencies": [],
  "globalVariables": [],
  "sceneVariables": [],
  "eventsFunctions": [
    {
      "fullName": "",
      "functionType": "Action",
      "name": "onFirstSceneLoaded",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const gdevelopToJsObject = (structureVar) => {",
            "    const result = {};",
            "",
            "    for (const key in structureVar._children) {",
            "        if (structureVar.hasChild(key)) {",
            "            const child = structureVar.getChild(key);",
            "",
            "            if (child.isStructure()) {",
            "                result[key] = gdevelopToJsObject(child);",
            "            } else {",
            "                result[key] = child.getValue();",
            "            }",
            "        }",
            "    }",
            "",
            "    return result;",
            "};",
            "",
            "const isObjectEmpty = (obj) => {",
            "    return obj && Object.keys(obj).length === 0 && obj.constructor === Object;",
            "}",
            "function setResultValues(resultVarChild, result) {",
            "    Object.keys(result).forEach(key => {",
            "        const value = result[key];",
            "        const valueType = typeof value;",
            "        switch(valueType) {",
            "            case \"string\":",
            "                resultVarChild.getChild(key).setString(value);",
            "                break;",
            "            case \"number\":",
            "                resultVarChild.getChild(key).setNumber(value);",
            "                break;",
            "            case \"boolean\":",
            "                resultVarChild.getChild(key).setBoolean(value);",
            "                break;",
            "            default:",
            "                console.warn(`Unsupported data type for key: ${key}`);",
            "                resultVarChild.getChild(key).setString(\"\");",
            "        }",
            "    });",
            "}",
            "function setResultToVarableCallback(results, resultsVar) {",
            "    if (results && results.length) {",
            "        resultsVar.clearChildren();",
            "        results.forEach((result, index) => {",
            "            const resultVarChild = resultsVar.getChild(index.toString());",
            "            setResultValues(resultVarChild, result);",
            "        });",
            "    }",
            "}",
            "",
            "gdjs._wortalExtension = {",
            "    isSdkReady: false,",
            "    isShowingAd: false,",
            "    hasAdJustFinishedShowing: false,",
            "    shouldRewardPlayer: false,",
            "    gdevelopToJsObject,",
            "    isObjectEmpty,",
            "    setResultToVarableCallback,",
            "};",
            "",
            "const script = document.createElement('script');",
            "script.src = 'https://storage.googleapis.com/cdn-wortal-ai/v2/wortal-core.js';",
            "script.async = true;",
            "document.head.appendChild(script);",
            "",
            "script.onload = function() {",
            "    Wortal.initializeAsync().then(() => {",
            "        gdjs._wortalExtension.isSdkReady = true;",
            "    });",
            "};"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Set the loading progress of your game",
      "fullName": "Set Wortal loading progress",
      "functionType": "Action",
      "group": "Core",
      "name": "SetLoadingProgress",
      "sentence": "Set Wortal loading progress to _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "Wortal.setLoadingProgress(eventsFunctionContext.getArgument(\"progress\"));",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Progress (0-100)",
          "name": "progress",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Check if Wortal SDK is ready",
      "fullName": "Wortal SDK is ready",
      "functionType": "Condition",
      "group": "Core",
      "name": "IsWortalInitialized",
      "sentence": "Wortal SDK is ready",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = gdjs._wortalExtension.isSdkReady;",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Start Game",
      "fullName": "Start Game",
      "functionType": "Action",
      "group": "Core",
      "name": "StartGameAsync",
      "sentence": "Start Game",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "Wortal.startGameAsync();",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Tracks the start of a gameplay session",
      "fullName": "Start the gameplay session",
      "functionType": "Action",
      "group": "Session",
      "name": "GamePlayStart",
      "sentence": "Start the gameplay session",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "Wortal.session.gameplayStart();",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Tracks the end of a gameplay session",
      "fullName": "Stop the gameplay session",
      "functionType": "Action",
      "group": "Session",
      "name": "GamePlayStop",
      "sentence": "Stop the gameplay session",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "Wortal.session.gameplayStop();",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Get user device ",
      "fullName": "Get user device",
      "functionType": "StringExpression",
      "group": "Session",
      "name": "GetDevice",
      "sentence": "Get User Device",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const device = Wortal.session.getDevice();",
            "eventsFunctionContext.returnValue = device;"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "supplementaryInformation": "[\"ANDROID\",\"IOS\",\"DESKTOP\",\"WEB\"]",
        "type": "stringWithSelector"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Get entry point that the game was launched from asynchronously",
      "fullName": "Get entry point asynchronously",
      "functionType": "StringExpression",
      "group": "Session",
      "name": "GetEntryPointAsync",
      "sentence": "Get entry point that the game asynchronously",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "Wortal.session.getEntryPointAsync().then((entryPoint) => {",
            "    eventsFunctionContext.returnValue = entryPoint;",
            "});",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Get any data object associated with the entry point that the game was launched from",
      "fullName": "Get entry point data",
      "functionType": "Action",
      "group": "Session",
      "name": "GetEntryPointData",
      "sentence": "Get any data object associated with the entry point",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const entryPointData = Wortal.session.getEntryPointData();\r",
            "const jsonString = JSON.stringify(entryPointData);\r",
            "eventsFunctionContext.getArgument(\"EntryPointJsonStringVariable\").setString(jsonString);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "EntryPointJsonStringVariable",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Get user locale in BCP47 format",
      "fullName": "Get Locale",
      "functionType": "StringExpression",
      "group": "Session",
      "name": "GetLocale",
      "sentence": "Get Locale",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = Wortal.session.getLocale();",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Get the orientation of the device the player is using",
      "fullName": "Get orientation",
      "functionType": "StringExpression",
      "group": "Session",
      "name": "GetOrientation",
      "sentence": "Get orientation",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = Wortal.session.getOrientation();",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Get the platform the game is running on. This is useful for platform specific code. For example, if you want to show a different social share asset on Facebook than on Link.",
      "fullName": "Get platform",
      "functionType": "StringExpression",
      "group": "Session",
      "name": "GetPlatform",
      "sentence": "Get platform",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = Wortal.session.getPlatform();",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Gets the traffic source info for the game. This is useful for tracking where players are coming from.",
      "fullName": "Get traffic source",
      "functionType": "StringExpression",
      "group": "Session",
      "name": "GetTrafficSource",
      "sentence": "Get traffic source",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = Wortal.session.getTrafficSource();",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Can be called on various player achievements (beating a boss, reaching a high score, etc.). It makes the website celebrate (for example by launching some confetti).",
      "fullName": "Happy time",
      "functionType": "Action",
      "group": "Session",
      "name": "HappyTime",
      "sentence": "Happy time",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "console.log(\"Happy\");\r",
            "Wortal.session.happyTime();"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Set the data associated with the individual gameplay session for the current context.",
      "fullName": "Set session data",
      "functionType": "Action",
      "group": "Session",
      "name": "SetSessionData",
      "sentence": "Set session data _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "try {\r",
            "    let jsonString = eventsFunctionContext.getArgument(\"dataAsJsonString\");\r",
            "    jsonString = jsonString.replace(/'/g, '\"');\r",
            "    const data = JSON.parse(jsonString);\r",
            "    Wortal.session.setSessionData(data);\r",
            "} catch (error) {\r",
            "    console.error(\"Invalid JSON format:\", error);\r",
            "}"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "dataAsJsonString",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "switch to another game. The API will reject if the switch fails - else, the client will load the new game",
      "fullName": "Switch game async",
      "functionType": "Action",
      "group": "Session",
      "name": "SwitchGameAsync",
      "sentence": "Switch game async with _PARAM1_ and _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "let jsonString = eventsFunctionContext.getArgument(\"dataAsJsonString\");",
            "const gameID = eventsFunctionContext.getArgument(\"GameID\");",
            "try {",
            "    if (jsonString) {",
            "        jsonString = jsonString.replace(/'/g, '\"');",
            "        const data = JSON.parse(jsonString);",
            "        return Wortal.session.switchGameAsync(gameID, data);",
            "    }",
            "    Wortal.session.switchGameAsync(gameID);",
            "} catch (error) {",
            "    console.error(\"Invalid JSON format:\", error);",
            "}"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "GameID",
          "type": "string"
        },
        {
          "description": "",
          "name": "dataAsJsonString",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Gets a player's achievements. This method returns all achievements, regardless of whether they are unlocked or not.",
      "fullName": "Get achievements async",
      "functionType": "Action",
      "group": "Achivements",
      "name": "GetAchievementsAsync",
      "sentence": "Get achievements async and set it to _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "Wortal.achievements.getAchievementsAsync()",
            "    .then((achievements) => {",
            "        const achievementsVar = eventsFunctionContext.getArgument(\"AchivementsVariable\");",
            "        achievementsVar.clearChildren();",
            "        achievements.forEach((achievement, index) => {",
            "            const achievementVar = achievementsVar.getChild(index.toString());",
            "            achievementVar.getChild(\"id\").setString(achievement.id || \"\");",
            "            achievementVar.getChild(\"description\").setString(achievement.description || \"\");",
            "            achievementVar.getChild(\"isUnlocked\").setNumber(achievement.isUnlocked || false);",
            "            achievementVar.getChild(\"name\").setNumber(achievement.name || \"\");",
            "            achievementVar.getChild(\"type\").setNumber(achievement.type || \"\");",
            "        });",
            "    });"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "AchivementsVariable",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Unlocks an achievement for the player. This method will only unlock the achievement if it has not already been unlocked.",
      "fullName": "Unlock achivement",
      "functionType": "Action",
      "group": "Achivements",
      "name": "UnlockAchivementAsync",
      "sentence": "Unlocks achievement _PARAM1_ and set if unlocked to _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const achievementName = eventsFunctionContext.getArgument(\"AchievementName\");",
            "const isUnclocked = eventsFunctionContext.getArgument(\"IsUnlockedVariable\");",
            "Wortal.achievements.unlockAchievementAsync(achievementName)",
            ".then((unlocked) => {",
            "    if(unlocked) {",
            "        isUnclocked.setBoolean(true);",
            "    } else {",
            "        isUnclocked.setBoolean(false);",
            "    }",
            "});"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "AchievementName",
          "type": "string"
        },
        {
          "description": "",
          "name": "IsUnlockedVariable",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Checks if the current user can subscribe to the game's bot.",
      "fullName": "Can subscribe to bot asynchronously",
      "functionType": "Condition",
      "group": "Player",
      "name": "CanSubscribeBotAsync",
      "sentence": "Can subscribe to bot asynchronously",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "Wortal.player.canSubscribeBotAsync()",
            ".then(canSubscribe => eventsFunctionContext.returnValue = canSubscribe);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Flushes any unsaved data to the platform's storage. This function is expensive, and should primarily be used for critical changes where persistence needs to be immediate and known by the game. Non-critical changes should rely on the platform to persist them in the background.",
      "fullName": "Flush data asynchronously",
      "functionType": "Action",
      "group": "Player",
      "name": "FlushDataAsync",
      "sentence": "Flush data asynchronously",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "Wortal.player.flushDataAsync().then(() => console.log(\"Data flushed.\"));",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "A unique identifier for the player. This is the standard Facebook Application-Scoped ID which is used for all Graph API calls. If your game shares an AppID with a native game this is the ID you will see in the native game too.",
      "fullName": "Get ASID asynchronously",
      "functionType": "StringExpression",
      "group": "Player",
      "name": "GetASIDAsync",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "Wortal.player.getASIDAsync().then(asid => eventsFunctionContext.returnValue = asid);",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Gets ConnectedPlayers containing information about active players that are connected to the current player.",
      "fullName": "Get connected players async",
      "functionType": "Action",
      "group": "Player",
      "name": "GetConnectedPlayersAsync",
      "sentence": "Get connected players with payload _PARAM1_ and set the result to _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const payloadVar = eventsFunctionContext.getArgument(\"ConnectedPlayerPayloadVariable\");",
            "const playersVar = eventsFunctionContext.getArgument(\"ConnectedPlayersVariable\");",
            "Wortal.player.getConnectedPlayersAsync(payloadVar).then((players) => {",
            "    if(players && players.length) {",
            "        playersVar.clearChildren();",
            "        playersVar.forEach((player, index) => {",
            "            const playerVar = playersVar.getChild(index.toString());",
            "            playerVar.getChild(\"id\").setString(player.id || \"\");",
            "            playerVar.getChild(\"name\").setString(player.name || \"\");",
            "            playerVar.getChild(\"photo\").setString(player.photo || \"\");",
            "            playerVar.getChild(\"isFirstPlay\").setNumber(player.isFirstPlay || 0);",
            "            playerVar.getChild(\"daysSinceFirstPlay\").setNumber(player.daysSinceFirstPlay || 0);",
            "        });        ",
            "    }",
            "});"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Payload variable with structure type",
          "name": "ConnectedPlayerPayloadVariable",
          "type": "variable"
        },
        {
          "description": "Array of connected player",
          "name": "ConnectedPlayersVariable2",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Retrieve data from the designated cloud storage of the current player.",
      "fullName": "Get player data async",
      "functionType": "Action",
      "group": "Player",
      "name": "GetDataAsync",
      "sentence": "Get player data with keys in _PARAM1_ and set the result to _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "const keyString = eventsFunctionContext.getArgument(\"DataKeyStringVariable\");",
                "const keys = keyString.getValue().split(\",\");",
                "const resultVariable = eventsFunctionContext.getArgument(\"ResultVariable\");",
                "Wortal.player.getDataAsync(keys)",
                ".then((data) => {",
                "    keys.forEach((key) => {",
                "        if (data[key] !== undefined) {",
                "            resultVariable.getChild(key).setValue(data[key]);",
                "        } else {",
                "            resultVariable.getChild(key).setString(\"\");",
                "        }",
                "    });",
                "    eventsFunctionContext.task.resolve();",
                "})",
                ".catch((error) => {",
                "    eventsFunctionContext.task.resolve();",
                "})",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "DataKeyStringVariable",
          "type": "variable"
        },
        {
          "description": "",
          "name": "ResultVariable",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Gets the player's ID from the platform.",
      "fullName": "Get player ID",
      "functionType": "StringExpression",
      "group": "Player",
      "name": "GetID",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = Wortal.player.getID();",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Gets the player's name on the platform.",
      "fullName": "Get player name",
      "functionType": "StringExpression",
      "group": "Player",
      "name": "GetName",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = Wortal.player.getName();",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Gets the player's photo from the platform.",
      "fullName": "Get player photo url",
      "functionType": "StringExpression",
      "name": "GetPhoto",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = Wortal.player.getPhoto();",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "A unique identifier for the player. This is the standard Facebook Application-Scoped ID which is used for all Graph API calls. If your game shares an AppID with a native game this is the ID you will see in the native game too.",
      "fullName": "Get signed ASID async",
      "functionType": "StringExpression",
      "name": "GetSignedASIDAsync",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const signedASIDVar = eventsFunctionContext.getArgument(\"SignedASIDResultVariable\");\r",
            "Wortal.player.getSignedASIDAsync().then((info) => {\r",
            "    signedASIDVar.clearChildren();\r",
            "    Object.keys(info).forEach((key) => {\r",
            "        const value = info[key];\r",
            "        const itemVar = signedASIDVar.getChild(key);\r",
            "        itemVar.setValue(value);\r",
            "    });  \r",
            "});"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [
        {
          "description": "",
          "name": "SignedASIDResultVariable",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Set data to be saved to the designated cloud storage of the current player.",
      "fullName": "Save data async",
      "functionType": "Action",
      "group": "Player",
      "name": "SetDataAsync",
      "sentence": "Save data _PARAM1_ async",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "const dataAsStructure = eventsFunctionContext.getArgument(\"DataStructureVariable\");\r",
                "const dataAdObj = gdjs._wortalExtension.gdevelopToJsObject(dataAsStructure);\r",
                "Wortal.player.setDataAsync(dataAdObj)\r",
                "  .then(() => {\r",
                "    eventsFunctionContext.task.resolve();\r",
                "  })\r",
                "  .catch((error) => {\r",
                "    eventsFunctionContext.task.resolve();\r",
                "  });\r",
                ""
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "DataStructureVariable",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Checks and return 1 or 0 whether this is the first time the player has played this game.",
      "fullName": "Is first play",
      "functionType": "Expression",
      "group": "Player",
      "name": "IsFirstPlay",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "isFirstPlayInNumber = Wortal.player.isFirstPlay() ? 1 : 0;",
            "eventsFunctionContext.returnValue = isFirstPlayInNumber;"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Shows the authentication prompt to the player. This allows the player to log in or register for an account. If the player successfully logs in or registers, the player API will be updated with the new player information.",
      "fullName": "Show auth prompt async",
      "functionType": "Action",
      "group": "Player",
      "name": "ShowAuthPromptAsync",
      "sentence": "Show auth prompt",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "try {",
                "    Wortal.player.showAuthPromptAsync()",
                "    .then(() => eventsFunctionContext.task.resolve())",
                "    .catch(() => eventsFunctionContext.task.resolve())",
                "} catch (error) {",
                "    eventsFunctionContext.task.resolve();",
                "}"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Shows the link account prompt to the player. This allows the player to link their account to a different platform.",
      "fullName": "Show link account prompt async",
      "functionType": "Action",
      "group": "Player",
      "name": "ShowLinkAccountPromptAsync",
      "sentence": "Show prompt to link account to different platform",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": []
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "try {",
            "    Wortal.player.showLinkAccountPromptAsync()",
            "    .then(() => eventsFunctionContext.task.resolve())",
            "    .catch(() => eventsFunctionContext.task.resolve())",
            "} catch (error) {",
            "    eventsFunctionContext.task.resolve();",
            "}"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Request that the player subscribe the bot associated to the game. The API will reject if the subscription fails - else, the player will subscribe the game bot.",
      "fullName": "Subscribe bot async",
      "functionType": "Action",
      "group": "Player",
      "name": "SubscribeBotAsync",
      "sentence": "Subscribe to the bot",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "try {",
            "    Wortal.player.subscribeBotAsync()",
            "    .then(() => eventsFunctionContext.task.resolve())",
            "    .catch(() => eventsFunctionContext.task.resolve())",
            "} catch (error) {",
            "    eventsFunctionContext.task.resolve();",
            "}"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Opens a context selection dialog for the player. If the player selects an available context, the client will attempt to switch into that context, and resolve if successful. Otherwise, if the player exits the menu or the client fails to switch into the new context, this function will reject.",
      "fullName": "Choose context async",
      "functionType": "Action",
      "group": "Context",
      "name": "ChooseContextAsync",
      "sentence": "Opens a context selection dialog",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "try {\r",
            "    Wortal.context.chooseAsync()\r",
            "    .then(() => eventsFunctionContext.task.resolve())\r",
            "    .catch(() => eventsFunctionContext.task.resolve())\r",
            "} catch (error) {\r",
            "    eventsFunctionContext.task.resolve();\r",
            "}"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Attempts to create a context between the current player and a specified player or a list of players.",
      "fullName": "Create context async",
      "functionType": "Action",
      "group": "Context",
      "name": "CreateContextAsync",
      "sentence": "Create a context with specified players with id _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "try {\r",
            "    const playerIds = eventsFunctionContext.getArgument(\"PlayerIDs\");\r",
            "    const ids = keyString.getValue().split(\",\");\r",
            "    Wortal.context.createAsync(ids)\r",
            "    .then(() => eventsFunctionContext.task.resolve())\r",
            "    .catch(() => eventsFunctionContext.task.resolve())\r",
            "} catch (error) {\r",
            "    eventsFunctionContext.task.resolve();\r",
            "}"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "PlayerIDs",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Get current context id",
      "fullName": "Get context id async",
      "functionType": "StringExpression",
      "group": "Context",
      "name": "GetContextID",
      "sentence": "Get context id",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = Wortal.context.getId();",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "string"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Gets an array of ConnectedPlayer objects containing information about active players in the current context (people who played the game in the current context in the last 90 days).",
      "fullName": "Get players async",
      "functionType": "Action",
      "group": "Context",
      "name": "GetPlayersAsync",
      "sentence": "Get connected players and set the result to _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const playersVar = eventsFunctionContext.getArgument(\"ConnectedPlayersVariable\");\r",
            "Wortal.context.getPlayersAsync().then((players) => {\r",
            "    if(players && players.length) {\r",
            "        playersVar.clearChildren();\r",
            "        playersVar.forEach((player, index) => {\r",
            "            const playerVar = playersVar.getChild(index.toString());\r",
            "            playerVar.getChild(\"id\").setString(player.id || \"\");\r",
            "            playerVar.getChild(\"name\").setString(player.name || \"\");\r",
            "            playerVar.getChild(\"photo\").setString(player.photo || \"\");\r",
            "            playerVar.getChild(\"isFirstPlay\").setNumber(player.isFirstPlay || 0);\r",
            "            playerVar.getChild(\"daysSinceFirstPlay\").setNumber(player.daysSinceFirstPlay || 0);\r",
            "        });        \r",
            "    }\r",
            "});"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "ConnectedPlayersVariable",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Gets the type of the current context.",
      "fullName": "Get context type",
      "functionType": "StringExpression",
      "group": "Context",
      "name": "GetContextType",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = Wortal.context.getType();",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "supplementaryInformation": "[\"SOLO\",\"THREAD\",\"GROUP\",\"POST\"]",
        "type": "stringWithSelector"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "This invokes a dialog to let the user invite one or more people to the game.",
      "fullName": "Invite Async",
      "functionType": "Action",
      "group": "Context",
      "name": "InviteAsync",
      "sentence": "Show a dialog to invite people to the game with payload _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const payloadAsStructure = eventsFunctionContext.getArgument(\"InvitePayloadStructureVariable\");",
            "const dataAsObj = gdjs._wortalExtension.gdevelopToJsObject(payloadAsStructure);",
            "Wortal.context.inviteAsync(dataAsObj).then(() => console.log(\"Invite sent!\"));"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "InvitePayloadStructureVariable2",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "This invokes a dialog to let the user share specified content, as a post on the user's timeline",
      "fullName": "Share async",
      "functionType": "Action",
      "group": "Context",
      "name": "ShareAsync",
      "sentence": "Show prompt to share content with payload _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const payloadAsStructure = eventsFunctionContext.getArgument(\"PayloadStructureVariable\");\r",
            "const dataAsObj = gdjs._wortalExtension.gdevelopToJsObject(payloadAsStructure);\r",
            "Wortal.context.shareAsync(dataAsObj).then(result => console.log(result));"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "PayloadStructureVariable2",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "This invokes a dialog that contains a custom game link that users can copy to their clipboard, or share.",
      "fullName": "Share link async",
      "functionType": "Action",
      "group": "Context",
      "name": "ShareLinkAsync",
      "sentence": "Show share link dialog with payload _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const payloadAsStructure = eventsFunctionContext.getArgument(\"PayloadStructureVariable\");",
            "const dataAsObj = gdjs._wortalExtension.gdevelopToJsObject(payloadAsStructure);",
            "Wortal.context.shareLinkAsync(dataAsObj).then(result => console.log(result));"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "PayloadStructureVariable2",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Request a switch into a specific context.",
      "fullName": "Swith context async",
      "functionType": "Action",
      "group": "Context",
      "name": "SwitchContextAsync",
      "sentence": "Switch to context id _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const contextId = eventsFunctionContext.getArgument(\"ContextID\");\r",
            "const contextIdValue = contextId.getValue();\r",
            "Wortal.context.switchAsync(contextIdValue);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "ContextID2",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Posts an update to the current context.",
      "fullName": "Update context async",
      "functionType": "Action",
      "group": "Context",
      "name": "UpdateContextAsync",
      "sentence": "Post update to currenct context with payload _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const payloadAsStructure = eventsFunctionContext.getArgument(\"PayloadStructureVariable\");\r",
            "const dataAsObj = gdjs._wortalExtension.gdevelopToJsObject(payloadAsStructure);\r",
            "Wortal.context.updateAsync(dataAsObj);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "PayloadStructureVariable",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Gets a player's stats",
      "fullName": "Get stats async",
      "functionType": "Action",
      "group": "Stats",
      "name": "GetStatsAsync",
      "sentence": "Gets a player's stats for level _PARAM1_ and period _PARAM2_ and set the result to _PARAM3_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const levelVar = eventsFunctionContext.getArgument(\"Level\");\r",
            "const level = levelVar.getValue();\r",
            "const statPeriodVar = eventsFunctionContext.getArgument(\"StatPeriod\");\r",
            "const statPeriod = statPeriodVar.getValue();\r",
            "const resultVar = eventsFunctionContext.getArgument(\"ArrayOfStatStructureVariable\");\r",
            "\r",
            "Wortal.stats.getStatsAsync(level, {\"period\": statPeriod})\r",
            ".then((stats) => {\r",
            "    if(stats && stats.length) {\r",
            "        resultVar.clearChildren();\r",
            "        stats.forEach((stat, index) => {\r",
            "            const result = resultVar.getChild(index.toString());\r",
            "            result.getChild(\"level\").setString(result.level || \"\");\r",
            "            result.getChild(\"lowerIsBetter\").setBoolean(result.lowerIsBetter || false);\r",
            "            result.getChild(\"period\").setString(result.period || \"\");\r",
            "            result.getChild(\"value\").setNumber(result.value || 0);\r",
            "            result.getChild(\"valueType\").setString(result.valueType || \"\");\r",
            "        });        \r",
            "    }\r",
            "});"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "Level",
          "type": "string"
        },
        {
          "description": "",
          "name": "StatPeriod",
          "supplementaryInformation": "[\"alltime\",\"daily\",\"monthly\",\"weekly\"]",
          "type": "stringWithSelector"
        },
        {
          "description": "",
          "name": "ArrayOfStatStructureVariable",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Posts a player's stats",
      "fullName": "Post stats async",
      "functionType": "Action",
      "group": "Stats",
      "name": "PostStatsAsync",
      "sentence": "Posts a stat for level _PARAM1_ with value _PARAM2_ and additional payload _PARAM3_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const level = eventsFunctionContext.getArgument(\"Level\").getValue();",
            "const value = eventsFunctionContext.getArgument(\"Value\").getValue();",
            "const payloadVar = eventsFunctionContext.getArgument(\"Payload\");",
            "const payloadAsObj = gdjs._wortalExtension.gdevelopToJsObject(payloadVar);",
            "",
            "const postStats = payload => {",
            "    Wortal.stats.postStatsAsync(level, value, payload)",
            "        .then(() => {",
            "            console.log(\"Stats posted successfully\");",
            "        })",
            "        .catch(() => {",
            "            console.warn(\"Failed to post stats\");",
            "        })",
            "        .finally(() => eventsFunctionContext.task.resolve());",
            "};",
            "",
            "const payload = gdjs._wortalExtension.isObjectEmpty(payloadAsObj) ? undefined : payloadAsObj;",
            "postStats(payload);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "Level",
          "type": "string"
        },
        {
          "description": "",
          "name": "Value",
          "type": "expression"
        },
        {
          "description": "Payload structure variable",
          "name": "Payload",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "fullName": "Cancel all notifications async",
      "functionType": "Action",
      "group": "Notification",
      "name": "CancelAllNotificationsAsync",
      "sentence": "Cancel all notifications with optional label _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const labelVar = eventsFunctionContext.getArgument(\"Label\");",
            "const label = labelVar ? labelVar.getValue() : undefined;",
            "",
            "const cancelNotifications = label => {",
            "    const cancelPromise = label ",
            "        ? Wortal.notifications.cancelAllAsync(label) ",
            "        : Wortal.notifications.cancelAllAsync();",
            "",
            "    cancelPromise",
            "        .then(result => {",
            "            console.log(`Notifications cancelled successfully: ${result}`);",
            "        })",
            "        .catch(error => {",
            "            console.warn(\"Failed to cancel notifications:\", error);",
            "        })",
            "        .finally(() => eventsFunctionContext.task.resolve());",
            "};",
            "",
            "cancelNotifications(label);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "Label",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Cancel notification async",
      "fullName": "Cancel notification async",
      "functionType": "Action",
      "group": "Notification",
      "name": "CancelNotificationAsync",
      "sentence": "Cancel notification with ID _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const id = eventsFunctionContext.getArgument(\"ID\").getValue();",
            "",
            "Wortal.notifications.cancelAsync(id)",
            "    .then(result => {",
            "        console.log(`Notification with ID ${id} cancelled successfully: ${result}`);",
            "    })",
            "    .catch(error => {",
            "        console.warn(`Failed to cancel notification with ID ${id}:`, error);",
            "    })",
            "    .finally(() => eventsFunctionContext.task.resolve());"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "ID",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Gets the history of scheduled notifications for the past 30 days.",
      "fullName": "Get notification history async",
      "functionType": "Action",
      "group": "Notification",
      "name": "GetNotificationHistoryAsync",
      "sentence": "Get notification history and set it to _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const historiesVar = eventsFunctionContext.getArgument(\"ArrayOfNotificationResultVariable\");\r",
            "Wortal.notifications.getHistoryAsync()\r",
            ".then(histories => {\r",
            "    if (!histories || histories.length === 0) {\r",
            "        console.log(\"No scheduled notifications found.\");\r",
            "    } else {\r",
            "        console.log(`Found ${histories.length} scheduled notifications:`);\r",
            "        historiesVar.clearChildren();\r",
            "        histories.forEach((history, index) => {\r",
            "            const result = historiesVar.getChild(index.toString());\r",
            "            result.getChild(\"id\").setString(history.id || \"\");\r",
            "            result.getChild(\"label\").setString(history.label || \"\");\r",
            "            result.getChild(\"status\").setString(history.status || \"\");\r",
            "            result.getChild(\"createdTime\").setString(history.createdTime || \"\");\r",
            "        });         \r",
            "    }\r",
            "})\r",
            ".catch(error => {\r",
            "    console.warn(\"Failed to retrieve notification history:\", error);\r",
            "})\r",
            ".finally(() => eventsFunctionContext.task.resolve());"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Variable callback to save the notification",
          "name": "ArrayOfNotificationResultVariable",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Schedule a notification to be delivered to the player at a later time. Limit of 5 pending scheduled notifications per recipient.",
      "fullName": "Schedule notification async",
      "functionType": "Action",
      "group": "Notification",
      "name": "ScheduleNotificationAsync",
      "sentence": "Schedule a notification with payload _PARAM1_ and set the result to _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const payloadVar = eventsFunctionContext.getArgument(\"PayloadVariable\");",
            "const payloadAsObj = gdjs._wortalExtension.gdevelopToJsObject(payloadVar);",
            "const resultVariable = eventsFunctionContext.getArgument(\"ScheduleResult\");",
            "",
            "Wortal.notifications.scheduleAsync(payloadAsObj)",
            ".then(result => {",
            "    if (result.success) {",
            "        const keys = Object.keys(result);",
            "        keys.forEach((key) => {",
            "            if (result[key] !== undefined) {",
            "                resultVariable.getChild(key).setValue(result[key]);",
            "            } else {",
            "                resultVariable.getChild(key).setString(\"\");",
            "            }",
            "        });            ",
            "        console.log(`Notification scheduled successfully with ID: ${result.id}`);",
            "    } else {",
            "        console.warn(\"Notification scheduling failed.\");",
            "    }",
            "})",
            ".catch(error => {",
            "    console.error(\"Error while scheduling notification:\", error);",
            "})",
            ".finally(() => eventsFunctionContext.task.resolve());"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Notification payload structure variable",
          "name": "PayloadVariable",
          "type": "variable"
        },
        {
          "description": "Schedule result structure variable",
          "name": "ScheduleResult",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Logs a choice the player made in the game. This can be a powerful tool for balancing the game and understanding what content the players are interacting with the most.",
      "fullName": "Log game choice",
      "functionType": "Action",
      "group": "Analytics",
      "name": "LogGameChoice",
      "sentence": "Logs player decision _PARAM1_ for choice _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const decision = eventsFunctionContext.getArgument(\"Decision\").getValue();\r",
            "const choice = eventsFunctionContext.getArgument(\"Choice\").getValue();\r",
            "Wortal.analytics.logGameChoice(decision, choice);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "Decision",
          "type": "string"
        },
        {
          "description": "",
          "name": "Choice",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Logs the end of a level. To ensure the level timer is recorded the level name must match the name passed into the previous logLevelStart call. If it does not match then the timer will be logged at 0.",
      "fullName": "Log level end",
      "functionType": "Action",
      "group": "Analytics",
      "name": "LogLevelEnd",
      "sentence": "Logs level _PARAM1_ with score _PARAM2_ is _PARAM3_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const level = eventsFunctionContext.getArgument(\"Level\").getValue();",
            "const score = eventsFunctionContext.getArgument(\"Score\").getValue();",
            "const wasCompleted = eventsFunctionContext.getArgument(\"WasCompleted\").getValue();",
            "const wasCompletedBool = (wasCompleted == \"completed\");",
            "Wortal.analytics.logLevelEnd(level, score, wasCompletedBool);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "Level",
          "type": "string"
        },
        {
          "description": "",
          "name": "Score",
          "type": "string"
        },
        {
          "description": "",
          "name": "WasCompleted",
          "supplementaryInformation": "[\"completed\",\"not completed\"]",
          "type": "stringWithSelector"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Logs the start of a level",
      "fullName": "Log level start",
      "functionType": "Action",
      "group": "Analytics",
      "name": "LogLevelStart",
      "sentence": "Logs level _PARAM1_ start",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const level = eventsFunctionContext.getArgument(\"Level\").getValue();\r",
            "Wortal.analytics.logLevelStart(level);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "Level",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Logs the player achieving a new level",
      "fullName": "Log level up",
      "functionType": "Action",
      "group": "Analytics",
      "name": "LogLevelUp",
      "sentence": "Logs level up to _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const level = eventsFunctionContext.getArgument(\"Level\").getValue();",
            "Wortal.analytics.logLevelUp(level);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "Level",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Logs the player's score",
      "fullName": "Log score",
      "functionType": "Action",
      "group": "Analytics",
      "name": "LogScore",
      "sentence": "Logs player score _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const score = eventsFunctionContext.getArgument(\"Score\").getValue();",
            "Wortal.analytics.logScore(score);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "Score2",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Logs the player's social invite",
      "fullName": "Log social invite",
      "functionType": "Action",
      "group": "Analytics",
      "name": "LogSocialInvite",
      "sentence": "Logs social invite with placement _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const placement = eventsFunctionContext.getArgument(\"Placement\").getValue();",
            "Wortal.analytics.logSocialInvite(placement);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Placement of the invite",
          "name": "Placement",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Logs the player's social share",
      "fullName": "Log social share",
      "functionType": "Action",
      "group": "Analytics",
      "name": "LogSocialShare",
      "sentence": "Logs social share with placement _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const placement = eventsFunctionContext.getArgument(\"Placement\").getValue();\r",
            "Wortal.analytics.logSocialShare(placement);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "Placement",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Logs the end of a tutorial. To ensure the level timer is recorded the tutorial name must match the name passed into the previous logTutorialStart call. If it does not match then the timer will be logged at 0",
      "fullName": "Log tutorial end",
      "functionType": "Action",
      "group": "Analytics",
      "name": "LogTutorialEnd",
      "sentence": "Log tutorial with name _PARAM1_ is _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const name = eventsFunctionContext.getArgument(\"Name\").getValue();",
            "const wasCompleted = eventsFunctionContext.getArgument(\"WasCompleted\").getValue();",
            "const wasCompletedBool = (wasCompleted == \"completed\");",
            "Wortal.analytics.logTutorialEnd(name, wasCompletedBool);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Name of the tutorial",
          "name": "Name",
          "type": "string"
        },
        {
          "description": "Was the tutorial completed",
          "name": "WasCompeleted",
          "supplementaryInformation": "[\"compeleted\",\"not compeleted\"]",
          "type": "stringWithSelector"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Logs the start of a tutorial",
      "fullName": "Log turotial start",
      "functionType": "Action",
      "group": "Analytics",
      "name": "LogTutorialStart",
      "sentence": "Logs tutorial _PARAM1_ start",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const name = eventsFunctionContext.getArgument(\"Name\").getValue();",
            "Wortal.analytics.logTutorialStart(name);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Name of the tutorial",
          "name": "Name",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Retrieves the leaderboard score entries of the current player's connected players (including the current player), ordered by local rank within the set of connected players",
      "fullName": "Get connected players entries",
      "functionType": "Action",
      "group": "Leaderboard",
      "name": "GetConnectedPlayersEntriesAsync",
      "sentence": "Gets connected player's for leaderboard _PARAM1_ with total entries _PARAM2_ offset _PARAM3_ and set the result to _PARAM4_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const name = eventsFunctionContext.getArgument(\"Name\").getValue();",
            "const count = eventsFunctionContext.getArgument(\"Count\").getValue();",
            "const offset = eventsFunctionContext.getArgument(\"Offset\").getValue();",
            "const resultVariable = eventsFunctionContext.getArgument(\"Result\");",
            "",
            "Wortal.leaderboard.getConnectedPlayersEntriesAsync(name, count, offset)",
            ".then(entries => {",
            "    if(entries && entries.length) {",
            "        resultVariable.clearChildren();",
            "        entries.forEach((entry, index) => {",
            "            const result = resultVariable.getChild(index.toString());",
            "            result.getChild(\"Details\").setString(entry.details || \"\");",
            "            result.getChild(\"FormattedScore\").setString(entry.formattedScore || \"\");",
            "            result.getChild(\"Player\").setString(entry.player || \"\");",
            "            result.getChild(\"Rank\").setNumber(entry.rank || 0);",
            "            result.getChild(\"Score\").setNumber(entry.score || 0);",
            "            result.getChild(\"Timestamp\").setNumber(entry.timestamp || 0);",
            "        });        ",
            "    }    ",
            "})",
            ".catch(error => {",
            "    console.error(\"Error while get connected players entries:\", error);",
            "})",
            ".finally(() => eventsFunctionContext.task.resolve());"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The name of the leaderboard",
          "name": "Name",
          "type": "string"
        },
        {
          "description": "The number of entries to attempt to fetch from the leaderboard",
          "name": "Count",
          "type": "expression"
        },
        {
          "description": "The offset from the set of ordered connected player score entries to fetch from",
          "name": "Offset",
          "type": "expression"
        },
        {
          "description": "Array of Leaderboard structure result variable callback",
          "name": "Result",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Retrieves a set of leaderboard entries, ordered by score ranking in the leaderboard",
      "fullName": "Get leaderboard entries",
      "functionType": "Action",
      "group": "Leaderboard",
      "name": "GetLeaderboardEntriesAsync",
      "sentence": "Gets entries for leaderboard _PARAM1_ with total entries _PARAM2_ offset _PARAM3_ and set the result to _PARAM4_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const name = eventsFunctionContext.getArgument(\"Name\").getValue();",
            "const count = eventsFunctionContext.getArgument(\"Count\").getValue();",
            "const offset = eventsFunctionContext.getArgument(\"Offset\").getValue();",
            "const resultVariable = eventsFunctionContext.getArgument(\"Result\");",
            "",
            "Wortal.leaderboard.getConnectedPlayersEntriesAsync(name, count, offset)",
            ".then(results => {",
            "    const resultsVar = eventsFunctionContext.getArgument(\"Result\");",
            "    gdjs._wortalExtension.setResultToVarableCallback(results, resultsVar);",
            "})",
            ".catch(error => {",
            "    console.warn(\"Error while get leaderboard entries:\", error);",
            "})",
            ".finally(() => eventsFunctionContext.task.resolve());"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The name of the leaderboard",
          "name": "Name",
          "type": "string"
        },
        {
          "description": "The number of entries to attempt to fetch from the leaderboard",
          "name": "Count",
          "type": "expression"
        },
        {
          "description": "The offset from the set of ordered connected player score entries to fetch from",
          "name": "Offset",
          "type": "expression"
        },
        {
          "description": "Array of Leaderboard structure result variable callback",
          "name": "Result",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Gets the total number of entries in the leaderboard",
      "fullName": "Get leaderboard entry count async",
      "functionType": "Expression",
      "group": "Leaderboard",
      "name": "GetLeaderboardEntryCountAsync",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const name = eventsFunctionContext.getArgument(\"Name\").getValue();\r",
            "Wortal.leaderboard.getEntryCountAsync(name)\r",
            ".then(entries => {\r",
            "    eventsFunctionContext.returnValue = entries;\r",
            "})\r",
            ".catch(error => {\r",
            "    console.error(\"Error while get leaderboard entries count:\", error);\r",
            "})\r",
            ".finally(() => eventsFunctionContext.task.resolve());"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "The name of the leaderboard",
          "name": "Name",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Fetch a specific leaderboard belonging to this game",
      "fullName": "Get leaderboard async",
      "functionType": "Action",
      "group": "Leaderboard",
      "name": "GetLeaderboardAsync",
      "sentence": "Fetch a specific leaderboard belonging to this game with name _PARAM1_ and set the result to _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const name = eventsFunctionContext.getArgument(\"Name\").getValue();",
            "const resultVariable = eventsFunctionContext.getArgument(\"Result\");",
            "",
            "Wortal.notifications.getLeaderboardAsync(name)",
            ".then(result => {",
            "    if (result) {",
            "        keys.forEach((key) => {",
            "            const keys = Object.keys(result);",
            "            if (result[key] !== undefined) {",
            "                resultVariable.getChild(key).setValue(result[key]);",
            "            } else {",
            "                resultVariable.getChild(key).setString(\"\");",
            "            }",
            "        });            ",
            "    } else {",
            "        console.warn(\"Failed to get leaderboard.\");",
            "    }",
            "})",
            ".catch(error => {",
            "    console.error(\"Error while fetching leaderbaord:\", error);",
            "})",
            ".finally(() => eventsFunctionContext.task.resolve());"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The name of the leaderboard. Each leaderboard for a game must have its own distinct name",
          "name": "Name",
          "type": "string"
        },
        {
          "description": "Leaderboard structure variable callback",
          "name": "Result",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Retrieves the leaderboard's entry for the current player, or null if the player has not set one yet",
      "fullName": "Get current player leaderboard entry async",
      "functionType": "Action",
      "group": "Leaderboard",
      "name": "GetCurrentPlayerEntryAsync",
      "sentence": "Gets current player's entry for leaderboard _PARAM1_ and set the result to _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const name = eventsFunctionContext.getArgument(\"Name\").getValue();\r",
            "const resultVariable = eventsFunctionContext.getArgument(\"Result\");\r",
            "\r",
            "Wortal.notifications.getPlayerEntryAsync(name)\r",
            ".then(result => {\r",
            "    if (result) {\r",
            "        keys.forEach((key) => {\r",
            "            if (result[key] !== undefined) {\r",
            "                resultVariable.getChild(key).setValue(result[key]);\r",
            "            } else {\r",
            "                resultVariable.getChild(key).setString(\"\");\r",
            "            }\r",
            "        });            \r",
            "    } else {\r",
            "        console.warn(\"Failed to get leaderboard entry for current player.\");\r",
            "    }\r",
            "})\r",
            ".catch(error => {\r",
            "    console.error(\"Error while fetching leaderbaord entry for current player:\", error);\r",
            "})\r",
            ".finally(() => eventsFunctionContext.task.resolve());"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The name of the leaderboard",
          "name": "Name",
          "type": "string"
        },
        {
          "description": "Leaderboard entry structure variable callback",
          "name": "Result",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Updates the player's score. If the player has an existing score, the old score will only be replaced if the new score is better than it",
      "fullName": "Send leaderboard entry async",
      "functionType": "Action",
      "group": "Leaderboard",
      "name": "SendEntryAsync",
      "sentence": "Send player entry for leaderboard _PARAM1_ with score _PARAM2_ and set the result to _PARAM3_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const name = eventsFunctionContext.getArgument(\"Name\").getValue();",
            "const score = eventsFunctionContext.getArgument(\"Score\").getValue();",
            "const resultVariable = eventsFunctionContext.getArgument(\"Result\");",
            "",
            "Wortal.notifications.sendEntryAsync(name, score)",
            ".then(result => {",
            "    if (result) {",
            "        keys.forEach((key) => {",
            "            if (result[key] !== undefined) {",
            "                resultVariable.getChild(key).setValue(result[key]);",
            "            } else {",
            "                resultVariable.getChild(key).setString(\"\");",
            "            }",
            "        });            ",
            "    } else {",
            "        console.warn(\"Failed to send leaderboard entry.\");",
            "    }",
            "})",
            ".catch(error => {",
            "    console.error(\"Error while sending leaderbaord entry for current player:\", error);",
            "})",
            ".finally(() => eventsFunctionContext.task.resolve());"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "The name of the leaderboard",
          "name": "Name",
          "type": "string"
        },
        {
          "description": "Score for the entry. Must be a 64-bit integer number",
          "name": "Score",
          "type": "expression"
        },
        {
          "description": "Leaderboard entry sturcture variable callback",
          "name": "Result",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Opens the tournament creation dialog if the player is not currently in a tournament session",
      "fullName": "Create a tournament async",
      "functionType": "Action",
      "group": "Tournament",
      "name": "CreateTournamentAsync",
      "sentence": "Open the tournament creation dialog with payload _PARAM1_ and set the result to _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const payloadVar = eventsFunctionContext.getArgument(\"Payload\");",
            "const payloadAsObj = gdjs._wortalExtension.gdevelopToJsObject(payloadVar);",
            "const resultVariable = eventsFunctionContext.getArgument(\"Result\");",
            "",
            "Wortal.tournament.createAsync(payloadAsObj)",
            ".then(result => {",
            "    if (result) {",
            "        const keys = Object.keys(result);",
            "        keys.forEach((key) => {",
            "            if (result[key] !== undefined) {",
            "                resultVariable.getChild(key).setValue(result[key]);",
            "            } else {",
            "                resultVariable.getChild(key).setString(\"\");",
            "            }",
            "        });            ",
            "        console.log(`Tournament created successfully with ID: ${result.contextID}`);",
            "    } else {",
            "        console.warn(\"Tournament creation failed.\");",
            "    }",
            "})",
            ".catch(error => {",
            "    console.error(\"Error while creating torunament:\", error);",
            "})",
            ".finally(() => eventsFunctionContext.task.resolve());"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Tournament creation payload structure variable",
          "name": "Payload2",
          "type": "variable"
        },
        {
          "description": "Tournament structure variable callback",
          "name": "Result",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Returns a list of eligible tournaments that can be surfaced in-game",
      "fullName": "Get all tournaments async",
      "functionType": "Action",
      "group": "Tournament",
      "name": "GetAllTournamentsAsync",
      "sentence": "Gets all tournaments and set the result to _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "Wortal.tournament.getAllAsync()",
            ".then(results => {",
            "    const resultsVar = eventsFunctionContext.getArgument(\"Result\");",
            "    gdjs._wortalExtension.setResultToVarableCallback(results, resultsVar);",
            "})",
            ".catch(error => {",
            "    console.warn(\"Failed to retrieve tournament history:\", error);",
            "})",
            ".finally(() => eventsFunctionContext.task.resolve());"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Array of tournament structure variable callback",
          "name": "Result",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Fetch the tournament out of the current context the user is playing",
      "fullName": "Get current tournament async",
      "functionType": "Action",
      "group": "Tournament",
      "name": "GetCurrentTournamentAsync",
      "sentence": "Gets current tournament and set the result to _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const resultVariable = eventsFunctionContext.getArgument(\"Result\");",
            "",
            "Wortal.tournament.getCurrentAsync()",
            ".then(result => {",
            "    if (result) {",
            "        const keys = Object.keys(result);",
            "        keys.forEach((key) => {",
            "            if (result[key] !== undefined) {",
            "                resultVariable.getChild(key).setValue(result[key]);",
            "            } else {",
            "                resultVariable.getChild(key).setString(\"\");",
            "            }",
            "        });            ",
            "        console.log(`Tournament retrieved successfully with ID: ${result.contextID}`);",
            "    } else {",
            "        console.warn(\"Tournament retrieved failed.\");",
            "    }",
            "})",
            ".catch(error => {",
            "    console.error(\"Error while retrieving torunament:\", error);",
            "})",
            ".finally(() => eventsFunctionContext.task.resolve());"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Tournament structure variable callback",
          "name": "Result",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Request a switch into a specific tournament context",
      "fullName": "Join tournament async",
      "functionType": "Action",
      "group": "Tournament",
      "name": "JoinTournamentAsync",
      "sentence": "Join a tournament with id _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const id = eventsFunctionContext.getArgument(\"ID\").getValue();",
            "Wortal.tournament.joinAsync(id)",
            ".then(() => {",
            "    console.error(\"Switched to tournament \", id);",
            "})",
            ".catch(error => {",
            "    console.error(\"Error while join tournament:\", error);",
            "})",
            ".finally(() => eventsFunctionContext.task.resolve());"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Tournament ID",
          "name": "ID",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Posts a player's score. This API should only be called within a tournament context at the end of an activity (example: when the player doesn't have \"lives\" to continue the game)",
      "fullName": "Post tournament score async",
      "functionType": "Action",
      "group": "Tournament",
      "name": "PostTournamentScoreAsync",
      "sentence": "Post score _PARAM1_ at the end of tournament activity",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const score = eventsFunctionContext.getArgument(\"Score\").getValue();",
            "Wortal.tournament.postScoreAsync(score)",
            ".then(() => {",
            "    console.error(\"Score posted\");",
            "})",
            ".catch(error => {",
            "    console.error(\"Error while posting score:\", error);",
            "})",
            ".finally(() => eventsFunctionContext.task.resolve());"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "Score",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Opens the share tournament dialog if the player is currently in a tournament session",
      "fullName": "Share tournament async",
      "functionType": "Action",
      "group": "Tournament",
      "name": "ShareTournamentAsync",
      "sentence": "Opens the share tournament dialog with payload _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const payloadVar = eventsFunctionContext.getArgument(\"Payload\");",
            "const payloadAsObj = gdjs._wortalExtension.gdevelopToJsObject(payloadVar);",
            "",
            "Wortal.tournament.shareAsync(payloadAsObj)",
            ".then(result => {",
            "    console.log(\"Shared tournament successfully\");",
            "})",
            ".catch(error => {",
            "    console.error(\"Error while sharing tournament:\", error);",
            "})",
            ".finally(() => eventsFunctionContext.task.resolve());"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Payload structure variable",
          "name": "Payload",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Consumes a specific purchase belonging to the current player",
      "fullName": "Consume purchase async",
      "functionType": "Action",
      "group": "IAP",
      "name": "ConsumePurchaseAsync",
      "sentence": "Consume purchased product with product id _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const productID = eventsFunctionContext.getArgument(\"ProductID\").getValue();",
            "Wortal.iap.consumePurchaseAsync(productID)",
            ".then(() => {",
            "    console.error(\"Consumed successfully\");",
            "})",
            ".catch(error => {",
            "    console.error(\"Error while consuming score:\", error);",
            "})",
            ".finally(() => eventsFunctionContext.task.resolve());"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "ID/Token of the Purchased product",
          "name": "ProductID",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "description": "Gets the catalog of available products the player can purchase",
      "fullName": "Get catalog async",
      "functionType": "Action",
      "group": "IAP",
      "name": "GetCatalogAsync",
      "sentence": "Gets the catalog of products and set to _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "Wortal.iap.getCatalogAsync()",
            ".then(results => {",
            "    const resultsVar = eventsFunctionContext.getArgument(\"Result\");",
            "    gdjs._wortalExtension.setResultToVarableCallback(results, resultsVar);",
            "})",
            ".catch(error => {",
            "    console.warn(\"Failed to retrieve catalog:\", error);",
            "})",
            ".finally(() => eventsFunctionContext.task.resolve());"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Array of product structure variable callback",
          "name": "Result",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "async": true,
      "fullName": "Get purchased products async",
      "functionType": "Action",
      "group": "IAP",
      "name": "GetPurchaseAsync",
      "sentence": "Get purchased products and set the result to _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "Wortal.iap.getPurchasesAsync()",
            ".then(results => {",
            "    const resultsVar = eventsFunctionContext.getArgument(\"Result\");",
            "    gdjs._wortalExtension.setResultToVarableCallback(results, resultsVar);",
            "})",
            ".catch(error => {",
            "    console.warn(\"Failed to retrieve purchased products:\", error);",
            "})",
            ".finally(() => eventsFunctionContext.task.resolve());"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Array of purchased products structure variable callback",
          "name": "Result",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Checks whether IAP is enabled in this session",
      "fullName": "Is IAP enabled",
      "functionType": "Condition",
      "name": "IsIAPEnabled",
      "sentence": "Is IAP enabled",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = Wortal.iap.isEnabled();",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "async": true,
      "fullName": "Make purchase async",
      "functionType": "Action",
      "group": "IAP",
      "name": "MakePurchaseAsync",
      "sentence": "Begins the purchase flow for product _PARAM1_ and set the result to _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "WortalSDK::IsWortalInitialized"
              },
              "parameters": [
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BuiltinAsync::ResolveAsyncEventsFunction"
              },
              "parameters": [
                ""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const productID = eventsFunctionContext.getArgument(\"ProductID\").getValue();",
            "Wortal.iap.makePurchaseAsync({\"productID\": productID})",
            ".then(results => {",
            "    const resultsVar = eventsFunctionContext.getArgument(\"Result\");",
            "    gdjs._wortalExtension.setResultToVarableCallback(results, resultsVar);",
            "})",
            ".catch(error => {",
            "    console.warn(\"Failed to retrieve purchased products:\", error);",
            "})",
            ".finally(() => eventsFunctionContext.task.resolve());"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "ID of product",
          "name": "ProductID",
          "type": "string"
        },
        {
          "description": "Purchase result structure variable callback",
          "name": "Result",
          "type": "variable"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Returns whether ads are enabled for the current session",
      "fullName": "Is ad enabled",
      "functionType": "Condition",
      "group": "Ad",
      "name": "IsAdEnabled",
      "sentence": "Is ad enabled",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = Wortal.ads.isEnabled();",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Returns whether ads are blocked for the current session",
      "fullName": "Is ad blocked",
      "functionType": "Condition",
      "name": "IsAdBlocked",
      "sentence": "Is ad blocked",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = Wortal.ads.isAdBlocked();",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Shows a banner ad",
      "fullName": "Show banner ad",
      "functionType": "Action",
      "group": "Ad",
      "name": "ShowBanner",
      "sentence": "Show a banner ad at the_PARAM1_ of the screen",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const position = eventsFunctionContext.getArgument(\"Position\").getValue();\r",
            "Wortal.ads.showBanner(true, position);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Ad position on the screen",
          "name": "Position",
          "supplementaryInformation": "[\"top\",\"bottom\"]",
          "type": "stringWithSelector"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Shows an interstitial ad. These can be shown at various points in the game such as a level end, restart or a timed interval in games with longer levels.",
      "fullName": "Show interstitial ad",
      "functionType": "Action",
      "group": "Ad",
      "name": "ShowInterstitialAd",
      "sentence": "Show interstitial ad on _PARAM1_ with decription _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const placement = eventsFunctionContext.getArgument(\"Placement\").getValue();",
            "const desc = eventsFunctionContext.getArgument(\"Description\").getValue();",
            "",
            "const volume = runtimeScene.getSoundManager().getGlobalVolume();",
            "Wortal.ads.showInterstitial(placement, desc, {",
            "    beforeAd: () => {",
            "        gdjs._wortalExtension.isShowingAd = true;",
            "        runtimeScene.getSoundManager().setGlobalVolume(0);",
            "    },",
            "    afterAd: () => {",
            "        gdjs._wortalExtension.hasAdJustFinishedShowing = true;",
            "        gdjs._wortalExtension.isShowingAd = false;",
            "        if (runtimeScene.getSoundManager().getGlobalVolume() === 0) {",
            "            runtimeScene.getSoundManager().setGlobalVolume(volume);",
            "        }",
            "    },",
            "    noFill: () => {",
            "        gdjs._wortalExtension.isShowingAd = false;",
            "        gdjs._wortalExtension.hasAdJustFinishedShowing = true;",
            "        if (runtimeScene.getSoundManager().getGlobalVolume() === 0) {",
            "            runtimeScene.getSoundManager().setGlobalVolume(volume);",
            "        }",
            "    },",
            "});"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Placement type",
          "name": "Placement",
          "supplementaryInformation": "[\"start\",\"pause\",\"next\",\"browse\"]",
          "type": "stringWithSelector"
        },
        {
          "description": "",
          "name": "Description",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Shows a rewarded ad. These are longer, optional ads that the player can earn a reward for watching. The player must be notified of the ad and give permission to show before it can be shown.",
      "fullName": "Show rewarded ad",
      "functionType": "Action",
      "group": "Ad",
      "name": "ShowRewardedAd",
      "sentence": "Show rewarded ad with description _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const desc = eventsFunctionContext.getArgument(\"Description\").getValue();",
            "const volume = runtimeScene.getSoundManager().getGlobalVolume();",
            "gdjs._wortalExtension.shouldRewardPlayer = false;",
            "",
            "function resetAdState() {",
            "    gdjs._wortalExtension.hasAdJustFinishedShowing = true;",
            "    gdjs._wortalExtension.isShowingAd = false;",
            "    if (runtimeScene.getSoundManager().getGlobalVolume() === 0) {",
            "        runtimeScene.getSoundManager().setGlobalVolume(volume);",
            "    }",
            "}",
            "",
            "Wortal.ads.showRewarded(desc, {",
            "    beforeAd: () => {",
            "        gdjs._wortalExtension.isShowingAd = true;",
            "        runtimeScene.getSoundManager().setGlobalVolume(0);",
            "    },",
            "    afterAd: resetAdState,",
            "    adDismissed: resetAdState,",
            "    adViewed: () => {",
            "        gdjs._wortalExtension.shouldRewardPlayer = true;",
            "        resetAdState();",
            "    },",
            "    noFill: resetAdState,",
            "});"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "",
          "name": "Description",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Check if ad is showing",
      "fullName": "Is ad showing",
      "functionType": "Condition",
      "group": "Ad",
      "name": "IsAdShowing",
      "sentence": "Is ad showing",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = gdjs._wortalExtension.isShowingAd;",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Check if ad just finished showing",
      "fullName": "Has ad just finished showing",
      "functionType": "Condition",
      "name": "HasAdJustFinishedShowing",
      "sentence": "Has ad just finished showing",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = gdjs._wortalExtension.hasAdJustFinishedShowing;",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "To check if should reward player after showing rewarded ad",
      "fullName": "Should reward player",
      "functionType": "Condition",
      "name": "ShouldRewardPlayer",
      "sentence": "Should reward player",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = gdjs._wortalExtension.shouldRewardPlayer;",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    }
  ],
  "eventsBasedBehaviors": [],
  "eventsBasedObjects": []
}